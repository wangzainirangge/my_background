webpackJsonp([14],{"+tHu":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"addBackgroundUser",data:function(){return{manageData:{identityLevel:1},isUpdate:2,title:"添加后台管理用户",registeredData:{username:"",password:"",realName:"",gender:"1",type:"",identityLevel:"",email:"",registeredIP:"111.222.333.444"},saveIP:[],options01:[{value:"1",label:"运营者"},{value:"2",label:"管理员"}],options02:[{value:"1",label:"管理部"},{value:"2",label:"研发部"},{value:"3",label:"宣传部"},{value:"4",label:"境外媒体部"},{value:"5",label:"境内媒体部"}]}},methods:{clickSubmitBtn:function(){this.registeredData.registeredIP=this.saveIP[0],null===this.registeredData.username||""===this.registeredData.username?this.$message({message:"未输入用户名！",type:"error"}):null===this.registeredData.password||""===this.registeredData.password?this.$message({message:"未输入密码！",type:"error"}):null===this.registeredData.identityLevel||""===this.registeredData.identityLevel?this.$message({message:"未选择用户类型！",type:"error"}):null===this.registeredData.type||""===this.registeredData.type?this.$message({message:"未选择所属部门！",type:"error"}):null===this.registeredData.realName||""===this.registeredData.realName?this.$message({message:"未输入真实姓名！",type:"error"}):null===this.registeredData.email||""===this.registeredData.email?this.$message({message:"未输入邮箱！",type:"error"}):2==this.isUpdate?this.addManage():this.updateManage()},addManage:function(){var e=this;this.$post(this.$api.module.operationManage,this.registeredData).then(function(t){200==t.status?(e.$message({message:"添加成功！",type:"success"}),e.refreshData(),e.$router.push({name:"managementBackgroundUser"})):e.$message({message:t.message,type:"error"})})},updateManage:function(){var e=this;this.$put(this.$api.module.operationManage+"/"+this.registeredData.manageID,this.registeredData).then(function(t){200==t.status?(e.$message({message:"修改成功！",type:"success"}),e.refreshData(),e.$router.push({name:"managementBackgroundUser"})):e.$message({message:"修改失败！",type:"error"})})},refreshData:function(){this.registeredData={username:"",password:"",realName:"",gender:"1",type:"",identityLevel:"",email:"",registeredIP:"111.222.333.444"}},getUserIP:function(e){var t=new(window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection)({iceServers:[]}),a=function(){},s={},i=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/g,r=function(t){s[t]||e(t),s[t]=!0};t.createDataChannel(""),t.createOffer().then(function(e){e.sdp.split("\n").forEach(function(e){e.indexOf("candidate")<0||e.match(i).forEach(r)}),t.setLocalDescription(e,a,a)}).catch(function(e){console.log(e)}),t.onicecandidate=function(e){e&&e.candidate&&e.candidate.candidate&&e.candidate.candidate.match(i)&&e.candidate.candidate.match(i).forEach(r)}}},mounted:function(){var e=this,t=this.getCookie("manageID");this.$get(this.$api.module.operationManage+"/"+t).then(function(t){200==t.status&&(e.manageData=t.data,1==e.manageData.identityLevel&&e.$message({message:"您无权限添加后台用户！",type:"warning"}))});var a=this.$route.params.updateData;a&&(this.registeredData=a,this.registeredData.gender=this.registeredData.gender.toString(),this.title="修改后台管理用户",this.isUpdate=1),this.getUserIP(function(t){e.ip=t,console.log(t),e.saveIP.push(t)})}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"ptSt"},[a("div",{staticStyle:{width:"100%",height:"50px","background-color":"#ddede0","margin-bottom":"40px"}},[a("el-row",{staticStyle:{"margin-bottom":"30px","margin-top":"5px"}},[a("el-col",{staticStyle:{"text-align":"center","font-size":"24px","margin-top":"10px"},attrs:{span:24}},[e._v("\n          "+e._s(e.title)+"\n        ")])],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"30px","margin-top":"5px"}},[a("el-col",{staticStyle:{"text-align":"right","font-size":"18px","margin-top":"8px"},attrs:{span:6}},[e._v("\n        用户名    \n      ")]),e._v(" "),a("el-col",{staticStyle:{"font-size":"24px"},attrs:{span:12}},[2==e.isUpdate?a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.registeredData.username,callback:function(t){e.$set(e.registeredData,"username",t)},expression:"registeredData.username"}}):e._e(),e._v(" "),1==e.isUpdate?a("el-input",{attrs:{disabled:!0,placeholder:"请输入用户名"},model:{value:e.registeredData.username,callback:function(t){e.$set(e.registeredData,"username",t)},expression:"registeredData.username"}}):e._e()],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"30px","margin-top":"5px"}},[a("el-col",{staticStyle:{"text-align":"right","font-size":"18px","margin-top":"8px"},attrs:{span:6}},[e._v("\n        密码    \n      ")]),e._v(" "),a("el-col",{staticStyle:{"font-size":"24px"},attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.registeredData.password,callback:function(t){e.$set(e.registeredData,"password",t)},expression:"registeredData.password"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"30px","margin-top":"5px"}},[a("el-col",{staticStyle:{"text-align":"right","font-size":"18px","margin-top":"8px"},attrs:{span:6}},[e._v("\n        性别    \n      ")]),e._v(" "),a("el-col",{staticStyle:{"font-size":"24px"},attrs:{span:12}},[a("el-radio",{attrs:{label:"1"},model:{value:e.registeredData.gender,callback:function(t){e.$set(e.registeredData,"gender",t)},expression:"registeredData.gender"}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.registeredData.gender,callback:function(t){e.$set(e.registeredData,"gender",t)},expression:"registeredData.gender"}},[e._v("女")])],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"30px","margin-top":"5px"}},[a("el-col",{staticStyle:{"text-align":"right","font-size":"18px","margin-top":"8px"},attrs:{span:6}},[e._v("\n        用户类型    \n      ")]),e._v(" "),a("el-col",{staticStyle:{"font-size":"24px"},attrs:{span:12}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.registeredData.identityLevel,callback:function(t){e.$set(e.registeredData,"identityLevel",t)},expression:"registeredData.identityLevel"}},e._l(e.options01,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"30px","margin-top":"5px"}},[a("el-col",{staticStyle:{"text-align":"right","font-size":"18px","margin-top":"8px"},attrs:{span:6}},[e._v("\n        所属部门    \n      ")]),e._v(" "),a("el-col",{staticStyle:{"font-size":"24px"},attrs:{span:12}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.registeredData.type,callback:function(t){e.$set(e.registeredData,"type",t)},expression:"registeredData.type"}},e._l(e.options02,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"30px","margin-top":"5px"}},[a("el-col",{staticStyle:{"text-align":"right","font-size":"18px","margin-top":"8px"},attrs:{span:6}},[e._v("\n        真实姓名    \n      ")]),e._v(" "),a("el-col",{staticStyle:{"font-size":"24px"},attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.registeredData.realName,callback:function(t){e.$set(e.registeredData,"realName",t)},expression:"registeredData.realName"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"30px","margin-top":"5px"}},[a("el-col",{staticStyle:{"text-align":"right","font-size":"18px","margin-top":"8px"},attrs:{span:6}},[e._v("\n        邮箱    \n      ")]),e._v(" "),a("el-col",{staticStyle:{"font-size":"24px"},attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.registeredData.email,callback:function(t){e.$set(e.registeredData,"email",t)},expression:"registeredData.email"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"30px","margin-top":"5px"}},[a("el-col",{staticStyle:{"text-align":"right","font-size":"18px","margin-top":"8px"},attrs:{span:18}},[2==e.manageData.identityLevel?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.clickSubmitBtn()}}},[e._v("提交")]):e._e(),e._v(" "),1==e.manageData.identityLevel?a("el-button",{attrs:{type:"primary",disabled:""},on:{click:function(t){e.clickSubmitBtn()}}},[e._v("提交")]):e._e()],1)],1)],1)])},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(e){a("owTc")},"data-v-52a99281",null);t.default=r.exports},owTc:function(e,t){}});
//# sourceMappingURL=14.5b7c5937be6d4cab85e6.js.map