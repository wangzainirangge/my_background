webpackJsonp([20],{ok9u:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"addOrdinaryUser",data:function(){return{isUpdate:2,saveIP:[],registeredData:{username:"",password:"",gender:"1",email:"",age:1,registeredIP:""}}},methods:{clickSubmitBtn:function(){this.registeredData.registeredIP=this.saveIP[0],null===this.registeredData.username||""===this.registeredData.username?this.$message({message:"未输入用户名！",type:"error"}):null===this.registeredData.password||""===this.registeredData.password?this.$message({message:"未输入密码！",type:"error"}):null===this.registeredData.email||""===this.registeredData.email?this.$message({message:"未输入邮箱！",type:"error"}):null===this.registeredData.age||""===this.registeredData.age?this.$message({message:"未输入年龄！",type:"error"}):2==this.isUpdate?this.addManage():this.updateManage()},addManage:function(){var e=this;this.$post(this.$api.module.operationUser,this.registeredData).then(function(t){200==t.status?(e.$message({message:"添加成功！",type:"success"}),e.refreshData()):e.$message({message:t.message,type:"error"})})},updateManage:function(){var e=this;this.$put(this.$api.module.operationUser+"/"+this.registeredData.userID,this.registeredData).then(function(t){200==t.status?(e.$message({message:"修改成功！",type:"success"}),e.refreshData(),e.$router.push({name:"managementUser"})):e.$message({message:"修改失败！",type:"error"})})},refreshData:function(){this.registeredData={username:"",password:"",gender:"1",email:"",age:""}},getUserIP:function(e){var t=new(window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection)({iceServers:[]}),a=function(){},s={},r=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/g,i=function(t){s[t]||e(t),s[t]=!0};t.createDataChannel(""),t.createOffer().then(function(e){e.sdp.split("\n").forEach(function(e){e.indexOf("candidate")<0||e.match(r).forEach(i)}),t.setLocalDescription(e,a,a)}).catch(function(e){console.log(e)}),t.onicecandidate=function(e){e&&e.candidate&&e.candidate.candidate&&e.candidate.candidate.match(r)&&e.candidate.candidate.match(r).forEach(i)}}},mounted:function(){var e=this,t=this.$route.params.updateData;t&&(this.isUpdate=1,this.registeredData=t,this.registeredData.gender=this.registeredData.gender.toString()),this.getUserIP(function(t){e.ip=t,console.log(t),e.saveIP.push(t)})}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"ptSt"},[a("div",{staticStyle:{width:"100%",height:"50px","background-color":"#ddede0","margin-bottom":"40px"}},[a("el-row",{staticStyle:{"margin-bottom":"30px","margin-top":"5px"}},[a("el-col",{staticStyle:{"text-align":"center","font-size":"24px","margin-top":"10px"},attrs:{span:24}},[e._v("\n          普通用户注册\n        ")])],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"30px","margin-top":"5px"}},[a("el-col",{staticStyle:{"text-align":"right","font-size":"18px","margin-top":"8px"},attrs:{span:6}},[e._v("\n        用户名    \n      ")]),e._v(" "),a("el-col",{staticStyle:{"font-size":"24px"},attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.registeredData.username,callback:function(t){e.$set(e.registeredData,"username",t)},expression:"registeredData.username"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"30px","margin-top":"5px"}},[a("el-col",{staticStyle:{"text-align":"right","font-size":"18px","margin-top":"8px"},attrs:{span:6}},[e._v("\n        密码    \n      ")]),e._v(" "),a("el-col",{staticStyle:{"font-size":"24px"},attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.registeredData.password,callback:function(t){e.$set(e.registeredData,"password",t)},expression:"registeredData.password"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"30px","margin-top":"5px"}},[a("el-col",{staticStyle:{"text-align":"right","font-size":"18px","margin-top":"8px"},attrs:{span:6}},[e._v("\n        性别    \n      ")]),e._v(" "),a("el-col",{staticStyle:{"font-size":"24px"},attrs:{span:12}},[a("el-radio",{attrs:{label:"1"},model:{value:e.registeredData.gender,callback:function(t){e.$set(e.registeredData,"gender",t)},expression:"registeredData.gender"}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.registeredData.gender,callback:function(t){e.$set(e.registeredData,"gender",t)},expression:"registeredData.gender"}},[e._v("女")])],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"30px","margin-top":"5px"}},[a("el-col",{staticStyle:{"text-align":"right","font-size":"18px","margin-top":"8px"},attrs:{span:6}},[e._v("\n        邮箱    \n      ")]),e._v(" "),a("el-col",{staticStyle:{"font-size":"24px"},attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.registeredData.email,callback:function(t){e.$set(e.registeredData,"email",t)},expression:"registeredData.email"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"30px","margin-top":"5px"}},[a("el-col",{staticStyle:{"text-align":"right","font-size":"18px","margin-top":"8px"},attrs:{span:6}},[e._v("\n        年龄    \n      ")]),e._v(" "),a("el-col",{staticStyle:{"font-size":"24px"},attrs:{span:12}},[a("el-input-number",{attrs:{min:1,max:100,label:"描述文字"},model:{value:e.registeredData.age,callback:function(t){e.$set(e.registeredData,"age",t)},expression:"registeredData.age"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"30px","margin-top":"5px"}},[a("el-col",{staticStyle:{"text-align":"right","font-size":"18px","margin-top":"8px"},attrs:{span:18}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.clickSubmitBtn()}}},[e._v("提交")])],1)],1)],1)])},staticRenderFns:[]};var i=a("VU/8")(s,r,!1,function(e){a("rVGw")},"data-v-2eed86c8",null);t.default=i.exports},rVGw:function(e,t){}});
//# sourceMappingURL=20.68bdbfcbe8529a1ea525.js.map